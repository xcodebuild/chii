function WidgetfocusWidgetForNode(e){for(;e&&!e.__widget;)e=e.parentNodeOrShadowHost();if(!e)return;let t=e.__widget;for(;t._parentWidget;)t._parentWidget._defaultFocusedChild=t,t=t._parentWidget}function XWidgetfocusWidgetForNode(e){e=e&&e.parentNodeOrShadowHost();let t=null;for(;e;)e instanceof self.XWidget&&(t&&(e._defaultFocusedElement=t),t=e),e=e.parentNodeOrShadowHost()}export function focusChanged(e){const t=e.target&&e.target.ownerDocument,o=t?t.deepActiveElement():null;WidgetfocusWidgetForNode(o),XWidgetfocusWidgetForNode(o),UI._keyboardFocus&&markAsFocusedByKeyboard(o)}export function markAsFocusedByKeyboard(e){e.setAttribute("data-keyboard-focus","true"),e.addEventListener("blur",()=>e.removeAttribute("data-keyboard-focus"),{once:!0,capture:!0})}
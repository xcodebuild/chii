import{Action}from"./Action.js";import{Context}from"./Context.js";export class ActionRegistry{constructor(){this._actionsById=new Map,this._registerActions()}_registerActions(){self.runtime.extensions("action").forEach((function(t){const n=t.descriptor().actionId;console.assert(n),console.assert(!this._actionsById.get(n));const s=new Action(t);!s.category()||s.title()?this._actionsById.set(n,s):console.error("Category actions require a title for command menu: "+n);t.canInstantiate()||s.setEnabled(!1)}),this)}availableActions(){return this.applicableActions([...this._actionsById.keys()],self.UI.context)}actions(){return[...this._actionsById.values()]}applicableActions(t,n){const s=[];return t.forEach((function(t){const n=this._actionsById.get(t);n&&n.enabled()&&s.push(n.extension())}),this),[...n.applicableExtensions(s)].map(function(t){return this.action(t.descriptor().actionId)}.bind(this))}action(t){return this._actionsById.get(t)||null}}